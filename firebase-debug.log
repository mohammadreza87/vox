[debug] [2025-12-29T15:56:26.032Z] ----------------------------------------------------------------------
[debug] [2025-12-29T15:56:26.034Z] Command:       /opt/homebrew/Cellar/node/23.11.0/bin/node /Users/rezahassanzadeh/.npm-global/bin/firebase deploy
[debug] [2025-12-29T15:56:26.034Z] CLI Version:   14.26.0
[debug] [2025-12-29T15:56:26.034Z] Platform:      darwin
[debug] [2025-12-29T15:56:26.034Z] Node Version:  v23.11.0
[debug] [2025-12-29T15:56:26.034Z] Time:          Mon Dec 29 2025 17:56:26 GMT+0200 (Eastern European Standard Time)
[debug] [2025-12-29T15:56:26.034Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-12-29T15:56:26.101Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-12-29T15:56:26.101Z] > authorizing via signed-in user (parastoo@joyixir.com)
[debug] [2025-12-29T15:56:26.101Z] [iam] checking project vox-aicontact-fe0e3 for permissions ["firebase.projects.get","firebasehosting.sites.update"]
[debug] [2025-12-29T15:56:26.102Z] Checked if tokens are valid: false, expires at: 1766953651435
[debug] [2025-12-29T15:56:26.102Z] Checked if tokens are valid: false, expires at: 1766953651435
[debug] [2025-12-29T15:56:26.102Z] > refreshing access token with scopes: []
[debug] [2025-12-29T15:56:26.103Z] >>> [apiv2][query] POST https://www.googleapis.com/oauth2/v3/token [none]
[debug] [2025-12-29T15:56:26.103Z] >>> [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2025-12-29T15:56:26.181Z] <<< [apiv2][status] POST https://www.googleapis.com/oauth2/v3/token 200
[debug] [2025-12-29T15:56:26.181Z] <<< [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2025-12-29T15:56:26.196Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/vox-aicontact-fe0e3:testIamPermissions [none]
[debug] [2025-12-29T15:56:26.196Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/vox-aicontact-fe0e3:testIamPermissions x-goog-quota-user=projects/vox-aicontact-fe0e3
[debug] [2025-12-29T15:56:26.196Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/vox-aicontact-fe0e3:testIamPermissions {"permissions":["firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2025-12-29T15:56:26.966Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/vox-aicontact-fe0e3:testIamPermissions 200
[debug] [2025-12-29T15:56:26.966Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/vox-aicontact-fe0e3:testIamPermissions {"permissions":["firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2025-12-29T15:56:26.966Z] Checked if tokens are valid: true, expires at: 1767027385181
[debug] [2025-12-29T15:56:26.966Z] Checked if tokens are valid: true, expires at: 1767027385181
[debug] [2025-12-29T15:56:26.967Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/vox-aicontact-fe0e3 [none]
[debug] [2025-12-29T15:56:27.427Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/vox-aicontact-fe0e3 200
[debug] [2025-12-29T15:56:27.427Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/vox-aicontact-fe0e3 {"projectId":"vox-aicontact-fe0e3","projectNumber":"785994266628","displayName":"Vox-AIContact","name":"projects/vox-aicontact-fe0e3","resources":{"hostingSite":"vox-aicontact-fe0e3"},"state":"ACTIVE","etag":"1_7132c27b-0b0f-42d1-80f6-4f0492ef4141"}
[debug] [2025-12-29T15:56:28.106Z] defaultcredentials: writing to file /Users/rezahassanzadeh/.config/firebase/parastoo_joyixir_com_application_default_credentials.json
[debug] [2025-12-29T15:56:28.107Z] Checked if tokens are valid: true, expires at: 1767027385181
[debug] [2025-12-29T15:56:28.107Z] Checked if tokens are valid: true, expires at: 1767027385181
[debug] [2025-12-29T15:56:28.107Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/vox-aicontact-fe0e3/sites pageToken=&pageSize=10
[debug] [2025-12-29T15:56:29.162Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/vox-aicontact-fe0e3/sites 200
[debug] [2025-12-29T15:56:29.162Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/vox-aicontact-fe0e3/sites {"sites":[{"name":"projects/vox-aicontact-fe0e3/sites/vox-aicontact-fe0e3","defaultUrl":"https://vox-aicontact-fe0e3.web.app","appId":"1:785994266628:web:5d1032b953bb3fcf295d51","type":"DEFAULT_SITE"}]}
[debug] [2025-12-29T15:56:29.162Z] Checked if tokens are valid: true, expires at: 1767027385181
[debug] [2025-12-29T15:56:29.162Z] Checked if tokens are valid: true, expires at: 1767027385181
[debug] [2025-12-29T15:56:29.162Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/-/webApps/1:785994266628:web:5d1032b953bb3fcf295d51/config [none]
[debug] [2025-12-29T15:56:30.084Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/-/webApps/1:785994266628:web:5d1032b953bb3fcf295d51/config 200
[debug] [2025-12-29T15:56:30.084Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/-/webApps/1:785994266628:web:5d1032b953bb3fcf295d51/config {"projectId":"vox-aicontact-fe0e3","appId":"1:785994266628:web:5d1032b953bb3fcf295d51","storageBucket":"vox-aicontact-fe0e3.firebasestorage.app","apiKey":"AIzaSyBfuO4U9ueQm4Pn0PMBG1NZLL-7sSxMNmo","authDomain":"vox-aicontact-fe0e3.firebaseapp.com","messagingSenderId":"785994266628","measurementId":"G-JS0VTNPZKH","projectNumber":"785994266628","version":"2"}
[info] 
   Thank you for trying our early preview of Next.js support on Firebase Hosting.
   During the preview, support is best-effort and breaking changes can be expected. Proceed with caution.
   The integration is known to work with Next.js version 12 - 15.0. You may encounter errors.

   Documentation: https://firebase.google.com/docs/hosting/frameworks/nextjs
   File a bug: https://github.com/firebase/firebase-tools/issues/new?template=bug_report.md
   Submit a feature request: https://github.com/firebase/firebase-tools/issues/new?template=feature_request.md

   We'd love to learn from you. Express your interest in helping us shape the future of Firebase Hosting: https://goo.gle/41enW5X

[debug] [2025-12-29T15:56:31.392Z] Checked if tokens are valid: true, expires at: 1767027385181
[debug] [2025-12-29T15:56:31.392Z] Checked if tokens are valid: true, expires at: 1767027385181
[debug] [2025-12-29T15:56:31.392Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/vox-aicontact-fe0e3/sites/vox-aicontact-fe0e3 [none]
[debug] [2025-12-29T15:56:31.605Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/vox-aicontact-fe0e3/sites/vox-aicontact-fe0e3 200
[debug] [2025-12-29T15:56:31.605Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/vox-aicontact-fe0e3/sites/vox-aicontact-fe0e3 {"name":"projects/vox-aicontact-fe0e3/sites/vox-aicontact-fe0e3","defaultUrl":"https://vox-aicontact-fe0e3.web.app","appId":"1:785994266628:web:5d1032b953bb3fcf295d51","type":"DEFAULT_SITE"}
[info]    ▲ Next.js 15.5.9

[info]    - Environments: .env.local, .env


[info]    Creating an optimized production build ...

[info]  ✓ Compiled successfully in 3.2s

[info]    Linting and checking validity of types ...

[info]  ⨯ ESLint: Cannot find module '/Users/rezahassanzadeh/Workspace/vox/node_modules/eslint-config-next/core-web-vitals' imported from /Users/rezahassanzadeh/Workspace/vox/eslint.config.mjs Did you mean to import "eslint-config-next/core-web-vitals.js"?

[info] Failed to compile.


[info] ./src/app/api/chat/stream/route.ts:87:30
Type error: Argument of type '(request: AuthenticatedRequest, _context: RouteContext) => Promise<Response>' is not assignable to parameter of type 'AuthenticatedHandler'.
  Type 'Promise<Response>' is not assignable to type 'Promise<NextResponse<unknown>>'.
    Type 'Response' is missing the following properties from type 'NextResponse<unknown>': cookies, [INTERNALS]

  85 | }
  86 |
> 87 | export const POST = withAuth(async (request: AuthenticatedRequest, _context) => {
     |                              ^
  88 |   const userId = request.userId;
  89 |   const rateResult = await checkRateLimitSecure(
  90 |     getChatRateLimiter(),

[info] Next.js build worker exited with code: 1 and signal: null

[debug] [2025-12-29T15:56:41.346Z] Error: ENOENT: no such file or directory, open '/Users/rezahassanzadeh/Workspace/vox/.next/export-marker.json'
[error] 
[error] Error: An unexpected error has occurred.
[debug] [2025-12-29T15:58:19.404Z] ----------------------------------------------------------------------
[debug] [2025-12-29T15:58:19.406Z] Command:       /opt/homebrew/Cellar/node/23.11.0/bin/node /Users/rezahassanzadeh/.npm-global/bin/firebase deploy
[debug] [2025-12-29T15:58:19.406Z] CLI Version:   14.26.0
[debug] [2025-12-29T15:58:19.406Z] Platform:      darwin
[debug] [2025-12-29T15:58:19.406Z] Node Version:  v23.11.0
[debug] [2025-12-29T15:58:19.407Z] Time:          Mon Dec 29 2025 17:58:19 GMT+0200 (Eastern European Standard Time)
[debug] [2025-12-29T15:58:19.407Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-12-29T15:58:19.559Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-12-29T15:58:19.559Z] > authorizing via signed-in user (parastoo@joyixir.com)
[debug] [2025-12-29T15:58:19.559Z] [iam] checking project vox-aicontact-fe0e3 for permissions ["firebase.projects.get","firebasehosting.sites.update"]
[debug] [2025-12-29T15:58:19.560Z] Checked if tokens are valid: true, expires at: 1767027385181
[debug] [2025-12-29T15:58:19.560Z] Checked if tokens are valid: true, expires at: 1767027385181
[debug] [2025-12-29T15:58:19.560Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/vox-aicontact-fe0e3:testIamPermissions [none]
[debug] [2025-12-29T15:58:19.560Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/vox-aicontact-fe0e3:testIamPermissions x-goog-quota-user=projects/vox-aicontact-fe0e3
[debug] [2025-12-29T15:58:19.560Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/vox-aicontact-fe0e3:testIamPermissions {"permissions":["firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2025-12-29T15:58:20.396Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/vox-aicontact-fe0e3:testIamPermissions 200
[debug] [2025-12-29T15:58:20.397Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/vox-aicontact-fe0e3:testIamPermissions {"permissions":["firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2025-12-29T15:58:20.397Z] Checked if tokens are valid: true, expires at: 1767027385181
[debug] [2025-12-29T15:58:20.397Z] Checked if tokens are valid: true, expires at: 1767027385181
[debug] [2025-12-29T15:58:20.397Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/vox-aicontact-fe0e3 [none]
[debug] [2025-12-29T15:58:20.812Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/vox-aicontact-fe0e3 200
[debug] [2025-12-29T15:58:20.812Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/vox-aicontact-fe0e3 {"projectId":"vox-aicontact-fe0e3","projectNumber":"785994266628","displayName":"Vox-AIContact","name":"projects/vox-aicontact-fe0e3","resources":{"hostingSite":"vox-aicontact-fe0e3"},"state":"ACTIVE","etag":"1_7132c27b-0b0f-42d1-80f6-4f0492ef4141"}
[debug] [2025-12-29T15:58:21.570Z] defaultcredentials: writing to file /Users/rezahassanzadeh/.config/firebase/parastoo_joyixir_com_application_default_credentials.json
[debug] [2025-12-29T15:58:21.571Z] Checked if tokens are valid: true, expires at: 1767027385181
[debug] [2025-12-29T15:58:21.571Z] Checked if tokens are valid: true, expires at: 1767027385181
[debug] [2025-12-29T15:58:21.571Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/vox-aicontact-fe0e3/sites pageToken=&pageSize=10
[debug] [2025-12-29T15:58:22.520Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/vox-aicontact-fe0e3/sites 200
[debug] [2025-12-29T15:58:22.521Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/vox-aicontact-fe0e3/sites {"sites":[{"name":"projects/vox-aicontact-fe0e3/sites/vox-aicontact-fe0e3","defaultUrl":"https://vox-aicontact-fe0e3.web.app","appId":"1:785994266628:web:5d1032b953bb3fcf295d51","type":"DEFAULT_SITE"}]}
[debug] [2025-12-29T15:58:22.521Z] Checked if tokens are valid: true, expires at: 1767027385181
[debug] [2025-12-29T15:58:22.521Z] Checked if tokens are valid: true, expires at: 1767027385181
[debug] [2025-12-29T15:58:22.521Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/-/webApps/1:785994266628:web:5d1032b953bb3fcf295d51/config [none]
[debug] [2025-12-29T15:58:23.165Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/-/webApps/1:785994266628:web:5d1032b953bb3fcf295d51/config 200
[debug] [2025-12-29T15:58:23.165Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/-/webApps/1:785994266628:web:5d1032b953bb3fcf295d51/config {"projectId":"vox-aicontact-fe0e3","appId":"1:785994266628:web:5d1032b953bb3fcf295d51","storageBucket":"vox-aicontact-fe0e3.firebasestorage.app","apiKey":"AIzaSyBfuO4U9ueQm4Pn0PMBG1NZLL-7sSxMNmo","authDomain":"vox-aicontact-fe0e3.firebaseapp.com","messagingSenderId":"785994266628","measurementId":"G-JS0VTNPZKH","projectNumber":"785994266628","version":"2"}
[info] 
   Thank you for trying our early preview of Next.js support on Firebase Hosting.
   During the preview, support is best-effort and breaking changes can be expected. Proceed with caution.
   The integration is known to work with Next.js version 12 - 15.0. You may encounter errors.

   Documentation: https://firebase.google.com/docs/hosting/frameworks/nextjs
   File a bug: https://github.com/firebase/firebase-tools/issues/new?template=bug_report.md
   Submit a feature request: https://github.com/firebase/firebase-tools/issues/new?template=feature_request.md

   We'd love to learn from you. Express your interest in helping us shape the future of Firebase Hosting: https://goo.gle/41enW5X

[debug] [2025-12-29T15:58:24.573Z] Checked if tokens are valid: true, expires at: 1767027385181
[debug] [2025-12-29T15:58:24.573Z] Checked if tokens are valid: true, expires at: 1767027385181
[debug] [2025-12-29T15:58:24.573Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/vox-aicontact-fe0e3/sites/vox-aicontact-fe0e3 [none]
[debug] [2025-12-29T15:58:24.793Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/vox-aicontact-fe0e3/sites/vox-aicontact-fe0e3 200
[debug] [2025-12-29T15:58:24.794Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/vox-aicontact-fe0e3/sites/vox-aicontact-fe0e3 {"name":"projects/vox-aicontact-fe0e3/sites/vox-aicontact-fe0e3","defaultUrl":"https://vox-aicontact-fe0e3.web.app","appId":"1:785994266628:web:5d1032b953bb3fcf295d51","type":"DEFAULT_SITE"}
[info]    ▲ Next.js 15.5.9

[info]    - Environments: .env.local, .env


[info]    Creating an optimized production build ...

[info]  ✓ Compiled successfully in 2.6s

[info]    Linting and checking validity of types ...

[info]  ⨯ ESLint: Cannot find module '/Users/rezahassanzadeh/Workspace/vox/node_modules/eslint-config-next/core-web-vitals' imported from /Users/rezahassanzadeh/Workspace/vox/eslint.config.mjs Did you mean to import "eslint-config-next/core-web-vitals.js"?

[info] Failed to compile.


[info] ./src/app/api/v2/sync/route.ts:87:15
Type error: Type 'string | undefined' is not assignable to type 'string'.
  Type 'undefined' is not assignable to type 'string'.

  85 |               contactId: localChat.contactId,
  86 |               contactName: localChat.contactName,
> 87 |               contactEmoji: localChat.contactEmoji,
     |               ^
  88 |               contactImage: localChat.contactImage,
  89 |               contactPurpose: localChat.contactPurpose,
  90 |               lastMessage: localChat.lastMessage,

[info] Next.js build worker exited with code: 1 and signal: null

[debug] [2025-12-29T15:58:33.725Z] Error: ENOENT: no such file or directory, open '/Users/rezahassanzadeh/Workspace/vox/.next/export-marker.json'
[error] 
[error] Error: An unexpected error has occurred.
